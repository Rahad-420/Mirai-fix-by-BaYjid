module.exports.config={name:"video",version:"1.0.0",hasPermssion:0,credits:"D-Jukie mod by chinhle",description:"Ph√°t video th√¥ng qua link YouTube ho·∫∑c t·ª´ kho√° t√¨m ki·∫øm",commandCategory:"Ti·ªán √≠ch",usages:"[searchVideos]",cooldowns:10,dependencies:{"ytdl-core":"","simple-youtube-api":""}},module.exports.handleReply=async function({api:e,event:a,handleReply:t}){const n=global.nodemodule.axios,s=global.nodemodule["fs-extra"],i=(global.nodemodule.request,await n.get("https://raw.githubusercontent.com/quyenkaneki/data/main/video.json")),r=i.data.keyVideo.length,o=i.data.keyVideo[Math.floor(Math.random()*r)],{createReadStream:d,createWriteStream:m,unlinkSync:l,statSync:h}=global.nodemodule["fs-extra"];var c,u=a.body;if(c=u,isNaN(c)||(c<1||c>6))return e.sendMessage("1 ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡ßá‡¶õ‡ßá ‡¶®‡¶ø‡¶® -> 6, ‡¶∂‡¶ø‡¶∂‡ßÅ ‡¶Ü‡¶Æ‡¶ø ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶≠‡¶æ‡¶≤‡ßã‡¶¨‡¶æ‡¶∏‡¶ø ‚ù§Ô∏è\n‡¶è‡¶á‡¶¶‡¶ø‡¶ï‡ßá ‡¶ì‡¶á‡¶¶‡¶ø‡¶ï‡ßá ‡¶ï‡¶ø ‡¶¶‡ßá‡¶ñ‡ßã ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶¨‡¶≤‡¶õ‡¶øüòª",a.threadID,a.messageID);e.unsendMessage(t.messageID);try{var g={method:"GET",url:"https://ytstream-download-youtube-videos.p.rapidapi.com/dl",params:{id:`${t.link[a.body-1]}`},headers:{"x-rapidapi-host":"ytstream-download-youtube-videos.p.rapidapi.com","x-rapidapi-key":`${o.API_KEY}`}};var p=(await n.request(g)).data,y=p.title;if("fail"==p.status)return e.sendMessage("‡¶è‡¶á ‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§ ",a.threadID);var f=Object.keys(p.link)[1],b=p.link[f][0];path1=__dirname+"/cache/1.mp4";const i=(await n.get(`${b}`,{responseType:"arraybuffer"})).data;return s.writeFileSync(path1,Buffer.from(i,"utf-8")),e.unsendMessage(t.messageID),s.statSync(__dirname+"/cache/1.mp4").size>26e6?e.sendMessage("‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶è‡¶ü‡¶ø 25MB ‡¶è‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶°‡¶º‡ß∑",a.threadID,(()=>l(__dirname+"/cache/1.mp4")),a.messageID):e.sendMessage({body:`¬ª ${y}`,attachment:s.createReadStream(__dirname+"/cache/1.mp4")},a.threadID,(()=>s.unlinkSync(__dirname+"/cache/1.mp4")),a.messageID)}catch{return e.sendMessage("‡¶è‡¶á ‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§ ",a.threadID,a.messageID)}for(let e=1;e<7;e++)l(__dirname+`/cache/${e}.png`)},module.exports.run=async function({api:e,event:a,args:t}){const n=global.nodemodule.axios,s=global.nodemodule["fs-extra"],i=(global.nodemodule.request,await n.get("https://raw.githubusercontent.com/quyenkaneki/data/main/video.json")),r=i.data.keyVideo.length,o=i.data.keyVideo[Math.floor(Math.random()*r)],d=(global.nodemodule["ytdl-core"],global.nodemodule["simple-youtube-api"]),{createReadStream:m,createWriteStream:l,unlinkSync:h,statSync:c}=global.nodemodule["fs-extra"];var u=["AIzaSyB5A3Lum6u5p2Ki2btkGdzvEqtZ8KNLeXo","AIzaSyAyjwkjc0w61LpOErHY_vFo6Di5LEyfLK0","AIzaSyBY5jfFyaTNtiTSBNCvmyJKpMIGlpCSB4w","AIzaSyCYCg9qpFmJJsEcr61ZLV5KsmgT1RE5aI4"];const g=u[Math.floor(Math.random()*u.length)],p=new d(g);if(0==t.length||!t)return e.sendMessage("¬ª ‡¶Ö‡¶®‡ßÅ‡¶∏‡¶®‡ßç‡¶ß‡¶æ‡¶® ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ!",a.threadID,a.messageID);const y=t.join(" ");if(0==t.join(" ").indexOf("https://")){var f={method:"GET",url:"https://ytstream-download-youtube-videos.p.rapidapi.com/dl",params:{id:t.join(" ").split(/^.*(youtu.be\/|v\/|embed\/|watch\?|youtube.com\/user\/[^#]*#([^\/]*?\/)*)\??v?=?([^#\&\?]*).*/)[3]},headers:{"x-rapidapi-host":"ytstream-download-youtube-videos.p.rapidapi.com","x-rapidapi-key":`${o.API_KEY}`}};var b=(await n.request(f)).data,v=b.title;if("fail"==b.status)return e.sendMessage("‡¶è‡¶á ‡¶´‡¶æ‡¶á‡¶≤ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡•§ ",a.threadID);var k=Object.keys(b.link)[1],I=b.link[k][0];path1=__dirname+"/cache/1.mp4";const i=(await n.get(`${I}`,{responseType:"arraybuffer"})).data;return s.writeFileSync(path1,Buffer.from(i,"utf-8")),s.statSync(__dirname+"/cache/1.mp4").size>26e6?e.sendMessage("‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶è‡¶ü‡¶ø 25MB ‡¶è‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶¨‡¶°‡¶º ‡ß∑",a.threadID,(()=>h(__dirname+"/cache/1.mp4")),a.messageID):e.sendMessage({body:`¬ª ${v}`,attachment:s.createReadStream(__dirname+"/cache/1.mp4")},a.threadID,(()=>s.unlinkSync(__dirname+"/cache/1.mp4")),a.messageID)}try{const t=global.nodemodule["fs-extra"],n=global.nodemodule.axios;var w=[],_="",D=0,S=0,M=[],$=await p.searchVideos(y,6);for(let e of $){if(void 0===e.id)return;w.push(e.id);e.id;let a=__dirname+`/cache/${S+=1}.png`,s=`https://img.youtube.com/vi/${e.id}/hqdefault.jpg`,i=(await n.get(`${s}`,{responseType:"arraybuffer"})).data,r=(await n.get(`https://www.googleapis.com/youtube/v3/videos?part=contentDetails&id=${e.id}&key=${g}`)).data.items[0].contentDetails.duration.slice(2).replace("S","").replace("M",":");(await n.get(`https://www.googleapis.com/youtube/v3/videos?part=snippet&id=${e.id}&key=${g}`)).data.items[0].snippet.channelTitle;if(t.writeFileSync(a,Buffer.from(i,"utf-8")),M.push(t.createReadStream(__dirname+`/cache/${S}.png`)),1==(D=D+=1))var x="‚ìµ";if(2==D)x="‚ì∂";if(3==D)x="‚ì∑";if(4==D)x="‚ì∏";if(5==D)x="‚ìπ";if(6==D)x="‚ì∫";if(3==D)x="‚ìª";if(3==D)x="‚ìº";if(3==D)x="‚ìΩ";_+=`${x} „Ää${r}„Äã ${e.title}\n\n`}var j=`ùòºùô®ùô®ùôñùô°ùôñùô¢ùô™ùô°ùôñùôûùô†ùô™ùô¢ü¶ãüíö¬ª‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ñ‡ßã‡¶ú ‡¶ï‡¶∞‡¶æ ‡¶π‡¶≤‡ßãüîé ‡¶Æ‡ßã‡¶ü ${w.length} ‡¶ü‡¶ø \n‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ø‡ßá ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ñ‡ßã‡¶Å‡¶ú ‡¶ï‡¶∞‡¶õ‡ßá‡¶®, ‡¶§‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡ßá‡¶® ‡¶è‡¶¨‡¶Ç ‡¶ï‡¶§ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡¶¨‡ßá‡¶® ‡¶§‡¶æ‡¶∞ ‡¶∞‡¶ø‡¶™‡ßç‡¶≤‡¶æ‡¶á ‡¶¶‡¶ø‡¶®üòª:\n\n${_}¬ª ùòºùô®ùô®ùôñùô°ùôñùô¢ùô™ùô°ùôñùôûùô†ùô™ùô¢ü¶ãüíö\n\nùêÅùêéùêì ùêéùêñùêçùêÑùêë : ùóîùó•ùóúùó¨ùóîùó° ùóñùóõùó¢ùó™ùóóùóõùó®ùó•ùó¨\n\nùêÇùêéùêçùêìùêÄùêÇùêì ùêÖùêÄùêÇùêÑùêÅùêéùêéùêä ùêÄùêÇùêÇùêéùêîùêçùêì : https://www.facebook.com/Ariyan.Chowdhury.official.3812\nùêÖùêÄùêÇùêÑùêÅùêéùêéùêä ùêÄùêÇùêÇùêéùêîùêçùêì 02 : https://www.facebook.com/Abal.Tor.Abbu.Irfan.Ariyan`;return e.sendMessage({attachment:M,body:j},a.threadID,((e,t)=>global.client.handleReply.push({name:this.config.name,messageID:t.messageID,author:a.senderID,link:w})),a.messageID)}catch(t){return e.sendMessage("‡¶è‡¶ï‡¶ü‡¶ø ‡¶Æ‡¶°‡¶ø‡¶â‡¶≤ ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£‡ßá ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßã‡¶ß‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø‡ß∑: "+t.message,a.threadID,a.messageID)}};